<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.wl2027.runtime.pivot.plugin</id>
    <name>runtime-pivot</name>
    <vendor>wl2027</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.all</depends>
    <depends>com.intellij.java</depends>


    <resource-bundle>messages.RuntimePivotBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Add your extensions here -->
        <java.programPatcher implementation="com.runtime.pivot.plugin.PerRun"/>
        <projectService serviceImplementation="com.runtime.pivot.plugin.service.XDebugMethodContext" />
        <toolWindow id="RuntimePivotWindow" anchor="right" icon="AllIcons.General.Locate"
                    factoryClass="com.runtime.pivot.plugin.view.RuntimePivotToolsWindow"/>
    </extensions>

<!--    com.intellij.icons.AllIcons.Actions.BuildAutoReloadChanges-->

    <actions>
        <group id="RuntimePivot.MainMenu" text="Runtime Pivot" popup="true"
               icon="AllIcons.General.Locate">
            <separator text="program"/>
            <action id="RuntimePivot.ClassLoaderTree" text="ClassLoader Tree"
                    icon="com.intellij.icons.AllIcons.Actions.ShowAsTree"
                    class="com.runtime.pivot.plugin.actions.program.ClassLoaderTreeAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt O"/>
            </action>
            <action id="RuntimePivot.ClassLoaderClassTree" text="ClassLoader Class Tree"
                    icon="com.intellij.icons.AllIcons.General.TreeHovered"
                    class="com.runtime.pivot.plugin.actions.program.ClassLoaderClassTreeAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt K"/>
            </action>
            <action id="RuntimePivot.TransformerList" text="Transformers"
                    icon="com.intellij.icons.AllIcons.Actions.ListFiles"
                    class="com.runtime.pivot.plugin.actions.program.TransformersAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt N"/>
            </action>

<!--            BalloonInformation Information ShowInfos-->
<!--            作用在类或对象上-->
            <separator text="class"/>
<!--            GroupByClass-->
            <action id="RuntimePivot.ClassLoadingProcess" text="Class Loading Process"
                    icon="com.intellij.icons.AllIcons.Nodes.Class"
                    class="com.runtime.pivot.plugin.actions.struct.ClassLoadingProcessAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt I"/>
            </action>
            <action id="RuntimePivot.ClassFileDump" text="Class File Dump"
                    icon="/icons/class-list.svg"
                    class="com.runtime.pivot.plugin.actions.struct.ClassFileDumpAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt J"/>
            </action>

            <separator text="method"/>
            <action id="RuntimePivot.MethodStartWatch" text="Start Monitoring"
                    icon="com.intellij.icons.AllIcons.Actions.ProfileBlue"
                    class="com.runtime.pivot.plugin.actions.method.MethodStartMonitoringAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt U"/>
            </action>
            <action id="RuntimePivot.MethodStopWatch" text="Stop Monitoring"
                    icon="com.intellij.icons.AllIcons.Actions.Suspend"
                    class="com.runtime.pivot.plugin.actions.method.MethodStopMonitoringAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt H"/>
            </action>
            <action id="RuntimePivot.BreakpointBacktracking" text="Breakpoint Backtracking"
                    icon="com.intellij.icons.AllIcons.Actions.Rollback"
                    class="com.runtime.pivot.plugin.actions.method.BreakpointBacktrackingAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt B"/>
            </action>
            <separator text="object"/>
            <action id="RuntimePivot.ObjectInternals" text="Object Internals"
                    icon="com.intellij.icons.AllIcons.General.BalloonInformation"
                    class="com.runtime.pivot.plugin.actions.object.ObjectInternalsAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt Y"/>
            </action>

            <action id="RuntimePivot.ObjectStore" text="Object Store"
                    icon="com.intellij.icons.AllIcons.Actions.Install"
                    class="com.runtime.pivot.plugin.actions.object.ObjectStoreAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt G"/>
            </action>

            <action id="RuntimePivot.ObjectLoad" text="Object Load"
                    icon="com.intellij.icons.AllIcons.Actions.Uninstall"
                    class="com.runtime.pivot.plugin.actions.object.ObjectLoadAction">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt V"/>
            </action>
            <add-to-group group-id="XDebugger.ValueGroup" anchor="first"/>
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
        </group>

        <action id="TestKS" class="com.runtime.pivot.plugin.actions.method.test2.TestKS" text="TestKS"
                description="TestKS">
            <add-to-group group-id="XDebugger.Actions" anchor="first"/>
<!--            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt O"/>-->
        </action>
    </actions>

</idea-plugin>
